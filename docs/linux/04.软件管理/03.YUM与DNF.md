---
title: YUM 与 DNF
sidebarPrefix: <i class='iconfont icon-baoguanliqi'> </i>
---

YUM（Yellowdog Updater Modified）是一款基于 RPM 包格式的开源软件包管理器，核心用于 Red Hat 系 Linux 发行版（如 Red Hat Enterprise Linux、CentOS、Fedora 等）的软件包自动化管理，涵盖安装、更新、卸载及依赖处理等核心场景。作为早期 RPM 系统的重要工具，YUM 彻底改变了传统 RPM 包手动安装的繁琐模式，其核心优势在于 **自动解析并解决软件包之间的依赖关系**，大幅降低了 Linux 系统软件管理的门槛。

> [!TIP]
> 可以将 YUM 类比为 Windows 系统中的软件管家或 macOS 中的 Homebrew：它通过预配置的软件仓库（Repository），自动下载对应系统版本的 RPM 包，不仅能一键完成目标软件安装，还会自动识别并安装该软件所需的所有依赖包，无需用户手动追踪依赖链、逐一下载安装，极大提升了软件部署效率。

随着系统规模扩大和软件生态复杂化，YUM 逐渐暴露出血性短板，如大量包处理时性能低下、内存占用过高、依赖解析速度慢、代码架构陈旧难以扩展等问题。为此，DNF（Dandified YUM）作为 YUM 的迭代升级版本应运而生，旨在解决这些长期存在的痛点，成为新一代 Red Hat 系系统的默认包管理器。

DNF 采用 libsolv 依赖解析引擎（由 SUSE 开发维护），相比 YUM 的传统解析机制，在依赖计算速度、资源占用控制上有质的提升，同时优化了代码结构，提供了完整的 API 文档，支持更多自定义扩展场景。从发行版适配来看，DNF 已在 CentOS 8 及以上版本、Fedora 22 及以上版本中取代 YUM 成为默认工具，兼容性更适配新系统内核与软件生态；而 YUM 仍广泛适用于 CentOS 7 及更早的旧版本系统，这类系统因生产环境稳定性需求，多数仍维持 YUM 作为核心包管理工具，且社区仍提供基础维护支持。

YUM 与 DNF 在基础命令语法上高度兼容，绝大多数日常操作的命令可以直接互换使用，降低了用户的学习和迁移成本。例如安装软件包、移除软件包、更新系统的核心命令，在两者中完全一致。差异主要体现在 DNF 新增的功能命令或对 YUM 命令的优化增强上，这些命令是 YUM 不支持或支持不完善的，例如：`dnf autoremove`（自动清理无用依赖）、`dnf history`（事务历史与回滚）、`dnf clean all`（缓存管理优化）等等。

## DNF 软件仓库

DNF 软件仓库（简称 Repo），是存放 RPM 软件包及对应元数据（如依赖关系、版本信息、校验值）的远程服务器或本地存储位置。Red Hat 系 Linux 发行版（如 Rocky Linux、RHEL、Fedora）的包管理器 DNF，正是通过读取预配置的仓库信息，实现软件包的搜索、安装、更新、卸载等自动化操作，同时完成依赖关系的自动解析。

在默认情况下，DNF 会加载系统预配置的官方仓库，这些配置随系统安装过程自动写入。用户也可根据需求，手动添加第三方仓库（如 EPEL 扩展仓库）、自定义本地仓库，以获取官方仓库中未包含的软件包或特定版本的软件。

DNF 与 YUM 保持高度兼容性，共享同一套仓库配置目录：`/etc/yum.repos.d/`。该目录下所有后缀为 `.repo` 的文件，均会被 DNF 自动识别并加载。

```bash
ll /etc/yum.repos.d/
```

```console
total 20
-rw-r--r--. 1 root root 6610 May  1 08:29 rocky-addons.repo
-rw-r--r--. 1 root root 1165 May  1 08:29 rocky-devel.repo
-rw-r--r--. 1 root root 2387 May  1 08:29 rocky-extras.repo
-rw-r--r--. 1 root root 3417 May  1 08:29 rocky.repo
```

这四个 `.repo` 文件分别对应不同的软件仓库：

| 配置文件名          | 作用定位                     | 详细描述                                                                                                                                                                                                                        |
| ------------------- | ---------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `rocky.repo`        | 系统核心基础仓库配置文件     | 包含 Rocky Linux 运行必需的核心仓库，是系统默认启用的核心配置。文件内通常涵盖 BaseOS（系统基础组件，如内核、初始化工具）、AppStream（用户态应用与运行时库，如常用服务、开发工具）等关键仓库，满足系统日常运行与基础应用部署需求 |
| `rocky-extras.repo` | 系统扩展补充仓库配置文件     | 包含不属于核心仓库范畴，但对系统功能有补充作用的仓库。文件内的仓库提供兼容性补丁、第三方驱动适配工具、小众实用工具等，属于官方维护的 “锦上添花” 类扩展包集合                                                                    |
| `rocky-devel.repo`  | 开发专用依赖仓库配置文件     | 专为软件开发场景设计的配置文件，包含的仓库提供各类编译依赖包与开发工具。例如编程语言头文件（.h）、静态链接库（.a）、gcc-devel python3-devel 等编译工具链，编译源码包时需启用此类仓库                                            |
| `rocky-addons.repo` | 特殊场景附加组件仓库配置文件 | 包含面向特定专业场景的仓库，普通用户极少用到。文件内的仓库提供企业级硬件专用驱动、官方合作商业软件插件、特定行业定制化工具等，主要服务于专业生产环境                                                                            |

每个 `.repo` 文件是 DNF 仓库的核心配置载体，可包含一个或多个独立的仓库配置段（section），每个配置段以 `[仓库ID]` 命名（如 `[baseos]`、`[appstream]`、`[crb]`），彼此独立配置、独立启用 / 禁用。不同配置段可对应不同类型的软件包集合（如基础系统包、应用程序包），也可指向不同的服务器地址，从而实现对软件源的精细化管理。

::: code-group

```shell [/etc/yum.repos.d/rocky.repo]
# rocky.repo
#
# The mirrorlist system uses the connecting IP address of the client and the
# update status of each mirror to pick current mirrors that are geographically
# close to the client.  You should use this for Rocky updates unless you are
# manually picking other mirrors.
#
# If the mirrorlist does not work for you, you can try the commented out
# baseurl line instead.

[baseos]
name=Rocky Linux $releasever - BaseOS
mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=$basearch&repo=BaseOS-$releasever$rltype
#baseurl=http://dl.rockylinux.org/$contentdir/$releasever/BaseOS/$basearch/os/
gpgcheck=1
enabled=1
countme=1
metadata_expire=6h
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-10

[baseos-debuginfo]
name=Rocky Linux $releasever - BaseOS - Debug
mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=$basearch&repo=BaseOS-$releasever-debug$rltype
#baseurl=http://dl.rockylinux.org/$contentdir/$releasever/BaseOS/$basearch/debug/tree/
gpgcheck=1
enabled=0
metadata_expire=6h
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-10

[baseos-source]
name=Rocky Linux $releasever - BaseOS - Source
mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=source&repo=BaseOS-$releasever-source$rltype
#baseurl=http://dl.rockylinux.org/$contentdir/$releasever/BaseOS/source/tree/
gpgcheck=1
enabled=0
metadata_expire=6h
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-10

[appstream]
name=Rocky Linux $releasever - AppStream
mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=$basearch&repo=AppStream-$releasever$rltype
#baseurl=http://dl.rockylinux.org/$contentdir/$releasever/AppStream/$basearch/os/
gpgcheck=1
enabled=1
countme=1
metadata_expire=6h
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-10

[appstream-debuginfo]
name=Rocky Linux $releasever - AppStream - Debug
mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=$basearch&repo=AppStream-$releasever-debug$rltype
#baseurl=http://dl.rockylinux.org/$contentdir/$releasever/AppStream/$basearch/debug/tree/
gpgcheck=1
enabled=0
metadata_expire=6h
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-10

[appstream-source]
name=Rocky Linux $releasever - AppStream - Source
mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=source&repo=AppStream-$releasever-source$rltype
#baseurl=http://dl.rockylinux.org/$contentdir/$releasever/AppStream/source/tree/
gpgcheck=1
enabled=0
metadata_expire=6h
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-10

[crb]
name=Rocky Linux $releasever - CRB
mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=$basearch&repo=CRB-$releasever$rltype
#baseurl=http://dl.rockylinux.org/$contentdir/$releasever/CRB/$basearch/os/
gpgcheck=1
enabled=0
countme=1
metadata_expire=6h
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-10

[crb-debuginfo]
name=Rocky Linux $releasever - CRB - Debug
mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=$basearch&repo=CRB-$releasever-debug$rltype
#baseurl=http://dl.rockylinux.org/$contentdir/$releasever/CRB/$basearch/debug/tree/
gpgcheck=1
enabled=0
metadata_expire=6h
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-10

[crb-source]
name=Rocky Linux $releasever - CRB - Source
mirrorlist=https://mirrors.rockylinux.org/mirrorlist?arch=source&repo=CRB-$releasever-source$rltype
#baseurl=http://dl.rockylinux.org/$contentdir/$releasever/CRB/source/tree/
gpgcheck=1
enabled=0
metadata_expire=6h
gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-Rocky-10
```

:::

其中，`[baseos]` 部分配置了基础操作系统（BaseOS）的仓库，而 `[appstream]` 部分配置了应用程序流（AppStream）的仓库。每个部分都可以有自己的 `mirrorlist` 或 `baseurl`，这意味着它们可以指向不同的服务器或镜像地址。`.repo` 文件中其他几个参数：

- `name`：为仓库指定描述性名称，用于在用户界面和日志中识别仓库。例如 `name=Rocky Linux $releasever - BaseOS` 表示该仓库是 Rocky Linux 基础操作系统仓库，其中 `$releasever` 是动态变量，会自动替换为系统发行版主版本号
- `mirrorlist`：提供动态镜像列表的 URL。系统执行安装或更新操作时，会通过该 URL 获取镜像服务器列表，并基于地理位置、服务器负载等因素自动选择最佳镜像源，优化下载速度
- `#baseurl：`：被注释的配置项，`.repo` 文件中以 `#` 开头的行不会被包管理器解析执行。`baseurl` 用于指定仓库的静态 URL 地址，与 `mirrorlist` 的动态选择不同，它会直接指向固定的镜像服务器或本地仓库路径。若访问 `mirrorlist` 不稳定，可取消注释该行并配置有效地址，同时注释掉 `mirrorlist` 行
- `gpgcheck`：控制软件包 GPG 签名验证的开关，取值为 `1`（启用）或 `0`（禁用）。启用后会校验软件包的签名，确保来源合法且未被篡改，是保障系统安全的推荐配置；禁用则会降低系统安全性，不建议使用
- `enabled`：控制仓库是否启用的开关，取值为 `1`（启用）或 `0`（禁用）。启用的仓库会被包管理器加载，可从中安装、更新软件包；禁用的仓库会被直接忽略，适用于临时关闭不需要的仓库（如调试、源码仓库）
- `countme`：控制仓库匿名使用统计的开关，取值为 `1`（启用）或 `0`（禁用）。启用后，包管理器会定期向官方发送一次匿名统计请求，用于统计镜像使用情况，不会影响仓库的启用状态，也不收集任何隐私数据
- `metadata_expire`：指定仓库元数据的过期时间，元数据包含软件包的名称、版本、依赖关系等索引信息。例如 `metadata_expire=6h` 表示元数据 6 小时后过期，过期后包管理器会自动重新下载最新元数据，以获取最新的软件包信息。合理设置过期时间，可平衡软件包时效性与网络资源消耗
- `gpgkey`：指定验证软件包 GPG 签名的公钥文件位置，支持本地路径或远程 URL。当 `gpgcheck=1` 时，必须配置正确的公钥路径，否则会导致签名校验失败，无法安装软件包

## 镜像仓库

DNF 镜像仓库，是指由第三方机构（开源社区、企业、高校等）或官方合作节点维护，通过定时增量同步技术，与官方软件仓库内容完全一致的副本仓库。存储的 RPM 软件包、软件包元数据（版本信息、依赖关系、校验值）及 GPG 签名文件，均与上游官方仓库完全同步，无任何篡改，仅存储位置、服务节点与官方仓库不同，确保用户获取的软件包安全可靠。

镜像仓库并非独立软件源，本质是官方仓库的异地备份与分发节点，核心价值有两点：

- 解决跨地域访问官方仓库的痛点（下载速度慢、网络延迟高、连接不稳定）
- 分流官方服务器的访问压力，保障全球用户访问官方生态时的整体稳定性

官方仓库的服务器通常集中部署在北美、欧洲等发行版发源地，国内及其他非核心区域用户直接访问时，会因跨境网络传输、骨干网拥堵等问题导致下载卡顿。而镜像仓库在全球多地域部署，用户选择地理位置更近的节点（如国内用户选用国内镜像站），可大幅缩短数据传输路径，将下载速率提升数倍，同时避免跨境网络波动影响。

国内常用镜像站：

| 名称               | 地址                                    |
| ------------------ | --------------------------------------- |
| 清华大学镜像站     | <https://mirrors.tuna.tsinghua.edu.cn/> |
| 阿里云镜像站       | <https://mirrors.aliyun.com/>           |
| 中国科技大学镜像站 | <https://mirrors.ustc.edu.cn/>          |
| 网易镜像站         | <http://mirrors.163.com/>               |
| 腾讯镜像源         | <https://mirrors.cloud.tencent.com/>    |
| 华为云镜像站       | <https://mirrors.huaweicloud.com/>      |

国内主流镜像站基本都会在官方网站提供详细的更换 DNF 源使用说明，这是镜像站服务的核心配套内容，目的是帮助用户快速完成源配置、解决官方源访问慢的问题中国科学技术大学开源软件镜像站。

> [!TIP] 源
>「源」是口语化简称，指 DNF 配置的软件仓库地址，也就是 `.repo` 文件中 `baseurl` 或 `mirrorlist` 指向的服务器地址，对应的是一个具体的软件仓库（可以是官方源、镜像源、第三方源等）。

例如，使用阿里镜像站更换默认源<https://developer.aliyun.com/mirror/rockylinux?spm=a2c6h.13651102.0.0.732c1b112z0Wt3>：

```shell
sed -e 's|^mirrorlist=|#mirrorlist=|g' \
-e 's|^#baseurl=http://dl.rockylinux.org/$contentdir|baseurl=https://mirrors.aliyun.com/rockylinux|g' \
-i.bak \
/etc/yum.repos.d/[Rr]ocky*.repo
```

这条命令的作用是：

- 注释官方动态镜像列表：把所有 `.repo` 文件里的 `mirrorlist=` 行开头加 `#`，让 DNF 不再使用官方的动态镜像地址
- 启用并替换静态镜像地址：取消官方 `baseurl` 行的注释，同时把地址换成阿里云镜像仓库地址，让 DNF 从阿里云下载软件包
- 自动备份原配置文件：修改前给每个 `.repo` 文件生成 `.bak` 后缀的备份，防止改错后无法回滚

> [!NOTE]
> 由于 RockyLinux 不同版本的原因，其 `/etc/yum.repos.d/` 目录下的 `.repo` 配置文件也有所不同，之前版本有类似 `Rocky-*` 的配置文件，所以在命令中匹配 `[Rr]`，这样可以兼容不用版本。

执行命令后可以使用 `ll` 命令再次列出它们：

```bash
ll /etc/yum.repos.d/
```

```console
total 40
-rw-r--r--. 1 root root 6610 Oct 27 15:32 rocky-addons.repo
-rw-r--r--. 1 root root 6610 May  1 08:29 rocky-addons.repo.bak
-rw-r--r--. 1 root root 1165 Oct 27 15:32 rocky-devel.repo
-rw-r--r--. 1 root root 1165 May  1 08:29 rocky-devel.repo.bak
-rw-r--r--. 1 root root 2387 Oct 27 15:32 rocky-extras.repo
-rw-r--r--. 1 root root 2387 May  1 08:29 rocky-extras.repo.bak
-rw-r--r--. 1 root root 3417 Oct 27 15:32 rocky.repo
-rw-r--r--. 1 root root 3417 May  1 08:29 rocky.repo.bak
```

并且可以看到默认的地址被修改为阿里云的镜像站地址了：

```bash
grep "^baseurl=" /etc/yum.repos.d/rocky.repo
```

```console
baseurl=https://mirrors.aliyun.com/rockylinux/$releasever/BaseOS/$basearch/os/
baseurl=https://mirrors.aliyun.com/rockylinux/$releasever/BaseOS/$basearch/debug/tree/
baseurl=https://mirrors.aliyun.com/rockylinux/$releasever/BaseOS/source/tree/
baseurl=https://mirrors.aliyun.com/rockylinux/$releasever/AppStream/$basearch/os/
baseurl=https://mirrors.aliyun.com/rockylinux/$releasever/AppStream/$basearch/debug/tree/
baseurl=https://mirrors.aliyun.com/rockylinux/$releasever/AppStream/source/tree/
baseurl=https://mirrors.aliyun.com/rockylinux/$releasever/CRB/$basearch/os/
baseurl=https://mirrors.aliyun.com/rockylinux/$releasever/CRB/$basearch/debug/tree/
baseurl=https://mirrors.aliyun.com/rockylinux/$releasever/CRB/source/tree/
```

更换源之后执行 `dnf clean all` 和 `dnf makecache` 命令：

```bash
dnf clean all
dnf makecache
```

- `dnf clean all`：当更换软件源后，系统中可能仍保留着旧源的缓存数据（如软件包索引、元数据等）。删除 DNF 本地缓存的所有临时文件（包括软件包元数据、已下载的 RPM 包等），确保后续操作基于新源的最新数据
- `dnf makecache`：从新配置的软件源下载最新的软件包元数据（如包名称、版本、依赖关系等），并存储在本地

如果想还原默认的配置文件，可以通过 `mv` 命令来重命名备份文件，使其替换掉当前的 `.repo` 文件即可。

## URL 变量

仓库基础 URL 变量，是 Linux 发行版 .repo 配置文件中用于指定仓库地址的动态占位符。这类变量由 DNF/YUM 包管理器在运行时自动解析并替换为系统实际参数，无需为不同版本、架构的系统手动编写多份配置文件，实现了仓库配置的通用性与自动化适配。

以 Rocky Linux 阿里云镜像源配置为例，`baseurl=https://mirrors.aliyun.com/rockylinux/$releasever/BaseOS/$basearch/os/` 中的 `$releasever` 和 `$basearch` 就是最常用的核心变量，包管理器会自动将其替换为当前系统的版本与架构信息：

- `$releasever`：发行版主版本号，用于匹配与系统版本兼容的软件包分支。不同主版本的系统依赖库差异较大，该变量可避免跨版本安装软件包导致的兼容性问题
- `$basearch`：系统基础架构用于匹配对应架构编译的软件包，防止在 x86 架构系统安装 ARM 架构包等错误

在 `.repo` 文件中，除了 `$releasever` 和 `$basearch` 之外，还有其他一些变量可以用于构建仓库的 URL。这些变量提供了一种灵活的方式来指定仓库的位置和配置，使得仓库管理更加自动化和适应不同的环境。以下是一些其他可能使用的变量：

- `$contentdir`：用于指定仓库内容的目录路径。这个变量通常用于构建完整的仓库 URL，指向包含软件包的目录
- `$infra`：代表基础设施版本，这个变量在某些仓库配置中使用，特别是在那些区分基础设施版本的仓库中
- `$rltype`：这是一个特定于 Rocky Linux 的变量，用于区分不同的仓库类型，如 AppStream、BaseOS 等。这个变量允许仓库 URL 根据仓库类型动态变化

## 本地仓库

DNF 本地仓库，是指将 RPM 软件包及其配套元数据（依赖关系、版本信息、校验值等）存储在本机磁盘、内网服务器或局域网共享存储中的 DNF/YUM 兼容软件仓库。它区别于远程官方仓库、镜像仓库，无需依赖公网连接，完全由本地或内网自主管控，是企业级生产环境与隔离网络场景下的核心软件源方案。

本地仓库的价值集中体现在对网络环境和软件包管控有严格要求的场景，远不止无互联网连接这一种情况：

- 离线 / 隔离网络环境：如军工、金融、政务等涉密场景，服务器禁止接入公网。本地仓库是这类环境中安装、更新软件的唯一途径，确保系统运维不受外网限制
- 内网集群批量部署：企业内网通常有数十、数百台服务器，若每台机器都从外网镜像仓库下载软件，会消耗大量带宽且效率低下。搭建内网共享本地仓库，所有机器可通过内网高速下载，大幅提升部署效率
- 软件版本精准管控：生产环境对软件版本稳定性要求极高，不允许随意更新到外网的最新版本（可能存在兼容性问题）。本地仓库可筛选特定稳定版本的 RPM 包入库，实现统一版本、统一分发，避免版本混乱
- 安全合规需求：外网仓库的软件包可能存在未知漏洞或恶意篡改风险。本地仓库可对入库的每一个 RPM 包进行安全扫描、GPG 签名，从源头保障软件包的合法性与安全性

## DNF 命令

`dnf` 是一款功能强大的命令行工具，专为基于 RPM 的 Linux 发行版设计，用于高效管理软件包。作为 YUM 的新一代继承者，DNF 带来了更快的依赖解析能力、更低的内存占用以及更优的性能表现。通过 `dnf` 命令，用户可以轻松执行以下操作：

- 安装新软件包，确保系统具备所需的应用程序和工具
- 更新现有软件包，保持系统安全和性能的最佳状态
- 删除不再需要的软件包，维护系统整洁
- 查询软件包信息，了解可用的软件资源及其详情
- 在安装或更新软件包的过程中自动解决依赖问题，确保软件包能够顺利安装或升级

```shell
dnf [GLOBAL_OPTION…] <COMMAND> [COMMAND_OPTION…] [ARGUMENT…]
```

:::: field-group

::: field name="GLOBAL_OPTION" type="全局通用选项" opptional
作用于整个 DNF 命令，无论后续跟什么核心命令都生效，可叠加多个，以下是最常用的：

- `y`：自动回答所有确认提示为 `yes，批量 / 脚本操作必备
- `q`：静默模式，仅输出关键信息，减少冗余输出
- `v`：详细模式，输出执行细节
- `--enablerepo=REPO_ID`：临时启用指定仓库，仅本次命令生效
- `--disablerepo=REPO_ID`：临时禁用指定仓库，仅本次命令生效
- `--nogpgcheck`：跳过 GPG 签名校验
- `--installroot=PATH`：指定安装根目录，适配 `chroot`、容器 / 系统镜像制作等特殊场景
- `--nodocs`：不安装软件包文档，节省磁盘空
- `--releasever=VERSION`：覆盖 `$releasever` 变量，强制使用指定系统版本的包
- `--skip-broken`：跳过依赖损坏 / 无法解决的软件包，避免整个操作因个别包依赖问题中断
- `--allowerasing`：允许删除已装包解决依赖。谨慎使用，防止误删关键包
:::

::: field name="COMMAND" type="核心主命令 / 插件命令" optional
DNF 的核心操作指令，主命令和插件命令二选一，不能同时使用。

核心主命令：

安装 / 升级 / 降级类：

- `install`：安装软件包，自动解决依赖
- `upgrade`：升级包，无参数则升级所有可更包
- `upgrade-minimal`：仅升级修复漏洞 / 问题的最小版本
- `downgrade`：降级指定包到旧版本
- `reinstall`：重新安装已安装的包，修复损坏文件
- `remove`：卸载包，默认清理无用依赖
- `autoremove`：清理不再需要的依赖包

查询 / 搜索类：

- `list`：列出所有包，包括已安装 / 可安装
- `info`：查看包的详细信息，包括版本、依赖、描述等
- `search`：按关键词搜索包，匹配名称 / 描述
- `provides`：查找哪个包提供指定文件 / 命令
- `repoquery`：高级包查询，依赖 / 文件列表等

缓存 / 清理类：

- `clean`：清除所有缓存数据，包括软件包元数据、已下载的 RPM 包等
- `makecache`：从新配置的软件源下载最新的软件包元数据，更新缓存

事务 / 仓库管理类：

- `history`：查看事务历史记录，包括安装、升级、删除等操作
- `repolist`：列出已配置的仓库

DNF 插件扩展的命令，功能上是主命令的补充：

- `download`：下载软件包，不安装，用于缓存或离线安装
- `builddep`：安装编译指定包所需的依赖
- `config-manager`：用于管理软件源和软件包配置，如添加、删除、启用、禁用软件源
- `needs-restarting`：检查是否有已安装的软件包需要重启服务 / 进程才能生效
- `reposync`：同步指定仓库的软件包元数据到本地缓存，用于离线安装或批量部署
:::

::: field name="COMMAND_OPTION" type="命令专属选项" optional
仅对当前执行的核心命令生效，不同命令的专属选项不同，以下是高频常用的：

- `--downloadonly`：适用于 `install`/`upgrade` 命令，仅下载包，不执行安装 / 升级
- `--security`：适用于 `upgrade`/`upgrade-minimal` 命令，仅处理安全相关的更新
- `--downloaddir=PATH`：适用于 `download`/`install` 命令，指定包下载目录
- `--noautoremove`：适用于 `remove` 命令，卸载包时不清理依赖
- `--showduplicates`：适用于 `list`/`search` 命令，显示仓库中的重复版本包
- `--deplist`：适用于 `repoquery` 命令，查看包的所有依赖
- `--set-enabled`：适用于 `config-manager` 命令，永久启用指定仓库
- `--set-disabled`：适用于 `config-manager` 命令，永久禁用指定仓库
:::

::: field name="ARGUMENT" type="参数" optional
是命令的操作对象，放在最后，可多个，类型取决于核心命令，以下是最常用的：

- 软件包名：适用于 `install`/`upgrade`/`remove` 等命令，指定要操作的目标包（可加版本号）
- 仓库名：适用于 `repolist`/`config-manager`/`reposync` 命令，指定要操作的目标仓库
- 文件路径：适用于 `install`/`builddep` 命令，指定要操作的本地文件，例如 RPM 包或 `.spec` 文件路径
- 关键词 / 路径：适用于 `search`/`provides` 命令，指定要搜索的关键词，匹配软件包名称或描述
- 操作标识：适用于 `clean`/`history` 命令，命令的专属标识，例如 `clean all` 、`history undo 5`、`list available`
::::

### 软件查询

- 列出所有可用的软件仓库

    使用 `dnf repolist` 命令可以列出系统上所有可用的软件仓库，包括已经启用和禁用的。这个命令会显示每个软件仓库的 ID、名称、状态和软件包的数量。例如：

    ```bash
    dnf repolist
    ```

    ```console
    repo id                 repo name
    appstream               Rocky Linux 10 - AppStream
    baseos                  Rocky Linux 10 - BaseOS
    extras                  Rocky Linux 10 - Extras
    ```

    这个命令可以快速了解当前系统中配置的软件仓库情况。

    除此之外，还可以使用 `dnf repolist all` 命令可以显示系统中所有启用 / 禁用的仓库。这个命令提供了一个全面的视图，可以看到所有配置的仓库，无论它们是启用还是禁用状态。例如：

    ```bash
    dnf repolist all
    ```

    ```console
    repo id                    repo name                     status
    appstream                  Rocky Linux 10 - AppStream    enabled
    appstream-debuginfo        Rocky Linux 10 - AppStream -  disabled
    appstream-source           Rocky Linux 10 - AppStream -  disabled
    baseos                     Rocky Linux 10 - BaseOS       enabled
    baseos-debuginfo           Rocky Linux 10 - BaseOS - Deb disabled
    baseos-source              Rocky Linux 10 - BaseOS - Sou disabled
    crb                        Rocky Linux 10 - CRB          disabled
    crb-debuginfo              Rocky Linux 10 - CRB - Debug  disabled
    crb-source                 Rocky Linux 10 - CRB - Source disabled
    devel                      Rocky Linux 10 - Devel WARNIN disabled
    devel-debuginfo            Rocky Linux 10 - Devel Debug  disabled
    devel-source               Rocky Linux 10 - Devel Source disabled
    extras                     Rocky Linux 10 - Extras       enabled
    extras-debuginfo           Rocky Linux 10 - Extras Debug disabled
    extras-source              Rocky Linux 10 - Extras Sourc disabled
    highavailability           Rocky Linux 10 - High Availab disabled
    highavailability-debuginfo Rocky Linux 10 - High Availab disabled
    highavailability-source    Rocky Linux 10 - High Availab disabled
    nfv                        Rocky Linux 10 - NFV          disabled
    nfv-debuginfo              Rocky Linux 10 - NFV Debug    disabled
    nfv-source                 Rocky Linux 10 - NFV Source   disabled
    plus                       Rocky Linux 10 - Plus         disabled
    plus-debuginfo             Rocky Linux 10 - Plus - Debug disabled
    plus-source                Rocky Linux 10 - Plus - Sourc disabled
    rt                         Rocky Linux 10 - Realtime     disabled
    rt-debuginfo               Rocky Linux 10 - Realtime Deb disabled
    rt-source                  Rocky Linux 10 - Realtime Sou disabled
    sap                        Rocky Linux 10 - SAP          disabled
    sap-debuginfo              Rocky Linux 10 - SAP Debug    disabled
    sap-source                 Rocky Linux 10 - SAP Source   disabled
    saphana                    Rocky Linux 10 - SAPHANA      disabled
    saphana-debuginfo          Rocky Linux 10 - SAPHANA Debu disabled
    saphana-source             Rocky Linux 10 - SAPHANA Sour disabled
    ```

    可以看到大部分仓库的状态是 `disabled`，只有少数几个（如 `appstream`、`baseos`、`extras`）是 `enabled`，并不是所有的仓库都被默认启用。

    如果想要启用其中一个仓库，可以使用 `dnf` 命令来启用特定的仓库，例如，需要启用 `crb` 这个仓库：

    ```bash
    dnf config-manager --set-enabled crb
    ```

    然后，可以通过再次运行 `dnf repolist` 或者 `dnf repolist all` 命令来检查仓库的状态：

    ```bash
    dnf repolist
    ```

    ```console {4}
    repo id                 repo name
    appstream               Rocky Linux 10 - AppStream
    baseos                  Rocky Linux 10 - BaseOS
    crb                     Rocky Linux 10 - CRB
    extras                  Rocky Linux 10 - Extras
    ```

    如果想关闭某个仓库执行 `dnf config-manager --set-disable [repo id]` 将 `[repo id]` 替换为想要关闭的仓库的 ID 即可。

    启用仓库后，需要更新仓库缓存以确保系统知道从新启用的仓库中获取软件包：

    ```bash
    dnf makecache
    ```

- 查询可用的软件包

    例如，查询 nginx 相关的软件包，这么命令会搜索软件仓库中的软件包，返回与查询关键词相关的软件包列表：

    ```bash
    dnf search nginx
    ```

    ```console
    ================== Name Exactly Matched: nginx ==================
    nginx.x86_64 : A high performance web server and reverse proxy
                : server
    ================= Name & Summary Matched: nginx =================
    nginx-all-modules.noarch : A meta package that installs all
                            : available Nginx modules
    nginx-core.x86_64 : nginx minimal core
    nginx-filesystem.noarch : The basic directory layout for the
                            : Nginx server
    nginx-mod-devel.x86_64 : Nginx module development files
    nginx-mod-http-image-filter.x86_64 : Nginx HTTP image filter
                                    : module
    nginx-mod-http-perl.x86_64 : Nginx HTTP perl module
    nginx-mod-http-xslt-filter.x86_64 : Nginx XSLT module
    nginx-mod-mail.x86_64 : Nginx mail modules
    nginx-mod-stream.x86_64 : Nginx stream modules
    pcp-pmda-nginx.x86_64 : Performance Co-Pilot (PCP) metrics for
                        : the Nginx Webserver
    ```

    这个命令成功地搜索到了与 nginx 相关的软件包。这些软件包提供了 Nginx 的核心功能以及各种扩展和监控工具，可以根据需要选择安装。

- 查询已安装的软件包

    ```bash
    dnf list installed
    ```

    ```console
    Installed Packages
    almalinux-gpg-keys.x86_64                                  10.1-16.el10                                          @System
    almalinux-release.x86_64                                   10.1-16.el10                                          @System
    almalinux-repos.x86_64                                     10.1-16.el10                                          @System
    alternatives.x86_64                                        1.30-2.el10                                           @System
    attr.x86_64                                                2.5.2-5.el10                                          @System
    audit-libs.x86_64                                          4.0.3-4.el10                                          @System
    ……
    ```

    这个命令会列出系统中所有已安装的软件包。

- 查询特定软件包的详细信息

    ```bash
    dnf info nginx
    ```

    ```console
    Last metadata expiration check: 0:01:14 ago on Tue 25 Nov 2025 02:27:40 PM CST.
    Available Packages
    Name         : nginx
    Epoch        : 2
    Version      : 1.26.3
    Release      : 1.el10
    Architecture : x86_64
    Size         : 36 k
    Source       : nginx-1.26.3-1.el10.src.rpm
    Repository   : appstream
    Summary      : A high performance web server and reverse proxy server
    URL          : https://nginx.org
    License      : BSD-2-Clause
    Description  : Nginx is a web server and a reverse proxy server for HTTP, SMTP, POP3 and
                : IMAP protocols, with a strong focus on high concurrency, performance and low
                : memory usage.
    ```

    这个命令会显示指定软件包的详细信息，包括版本、大小、依赖关系等。

- 查询软件包是否在仓库中可用

    ```bash
    dnf list nginx
    ```

    ```console
    Last metadata expiration check: 0:02:19 ago on Tue 25 Nov 2025 02:27:40 PM CST.
    Available Packages
    nginx.x86_64                                          2:1.26.3-1.el10                                          appstream
    ```

    如果软件包在仓库中可用，该命令将列出软件包的详细信息，包括版本号、仓库名称等。如果软件包不在仓库中，命令将返回错误信息，提示没有找到匹配的软件包。

- 查询所有可用的软件包

    ```bash
    dnf list available
    ```

    这个命令会列出所有可用的软件包。

- 查询特定软件包的依赖关系

    ```bash
    dnf repoquery --requires nginx
    ```

    ```console
    Last metadata expiration check: 0:43:22 ago on Thu Oct 31 10:32:24 2024.
    /bin/sh
    /usr/bin/sh
    nginx-core = 1:1.20.1-16.el9_4.1
    nginx-filesystem = 1:1.20.1-16.el9_4.1
    pcre
    system-logos-httpd
    systemd
    ```

### 软件安装

使用 `dnf install` 安装软件包时，DNF 会自动解决依赖关系。这意味着如果尝试安装一个依赖于其他软件包的软件包，DNF 会自动识别这些依赖关系，并尝试从配置的仓库中安装所有必需的依赖项。这一特性使得 DNF 非常适合用于自动化脚本和批量安装，因为它减少了手动解决依赖问题的需求。

例如安装 nginx：

```bash
dnf install nginx
```

```console
Last metadata expiration check: 0:01:39 ago on Sun 18 Jan 2026 09:35:32 PM CST.
Dependencies resolved.
=================================================================
 Package            Arch    Version             Repository  Size
=================================================================
Installing:
 nginx              x86_64  2:1.26.3-1.el10     appstream   33 k
Installing dependencies:
 nginx-core         x86_64  2:1.26.3-1.el10     appstream  663 k
 nginx-filesystem   noarch  2:1.26.3-1.el10     appstream   11 k
 rocky-logos-httpd  noarch  100.4-7.el10        appstream   24 k

Transaction Summary
=================================================================
Install  4 Packages

Total download size: 730 k
Installed size: 1.9 M
```

在这部分输出中，`dnf` 明确指出了将要安装的软件包（Installing）以及这些软件包的依赖项（Installing dependencies）。具体来说：

- nginx 是尝试安装的软件包
- nginx-core、nginx-filesystem 和 rocky-logos-httpd 是 nginx 需要的依赖软件包，`dnf` 会自动安装它们以满足 nginx 的安装要求

这些依赖软件包被列在 Installing dependencies 下面，这就是 `dnf` 显示依赖关系的方式。

默认情况下，`dnf` 在安装软件包时会提示用户确认，要求输入 `y`（表示「是」）来确认安装，或者输入 `N`（表示「否」）来取消安装。这主要是为了防止误操作，确保用户对即将安装的软件包及其依赖关系有所了解。

如果想要自动安装软件包而不需要每次确认，可以使用 `-y` 选项来自动回答 yes。

除此自外，还可以使用 `dnf download` 命令下载单个包或者一组包，包括它们的依赖。这对于在没有互联网连接的环境中安装软件包非常有用，因为可以在有网络的环境中下载所有需要的包和它们的依赖，然后将它们传输到没有网络的环境中进行安装。

例如，下载 docker 软件和其相关依赖并不安装：

```bash
dnf download --resolve --downloaddir=/root/ docker
```

```bash
ls
```

```console
 aardvark-dns-1.12.1-1.el9.x86_64.rpm
 conmon-2.1.12-1.el9.x86_64.rpm
 container-selinux-2.232.1-1.el9.noarch.rpm
 containers-common-1-93.el9_5.x86_64.rpm
 criu-3.19-1.el9.x86_64.rpm
 criu-libs-3.19-1.el9.x86_64.rpm
 crun-1.16.1-1.el9.x86_64.rpm
 fuse-common-3.10.2-9.el9.x86_64.rpm
 fuse-overlayfs-1.14-1.el9.x86_64.rpm
 fuse3-3.10.2-9.el9.x86_64.rpm
 fuse3-libs-3.10.2-9.el9.x86_64.rpm
 libnet-1.2-7.el9.x86_64.rpm
 libslirp-4.4.0-8.el9.x86_64.rpm
 netavark-1.12.2-1.el9.x86_64.rpm
'passt-0^20240806.gee36266-2.el9.x86_64.rpm'
'passt-selinux-0^20240806.gee36266-2.el9.noarch.rpm'
 podman-5.2.2-9.el9_5.x86_64.rpm
 podman-docker-5.2.2-9.el9_5.noarch.rpm
 protobuf-c-1.3.3-13.el9.x86_64.rpm
 shadow-utils-subid-4.9-9.el9.x86_64.rpm
 slirp4netns-1.3.1-1.el9.x86_64.rpm
 tar-1.34-7.el9.x86_64.rpm
 yajl-2.1.0-22.el9.x86_64.rpm
```

### 软件升级

`dnf` 软件升级通常是指将系统中已安装的软件包更新到软件仓库中提供的更高版本的过程。这个版本是由系统配置的软件仓库中提供的。如果软件包的新版本已经发布，但软件仓库中没有更新，那么 `dnf` 也不会提示有更新可用。

> [!NOTE]
> 例如，如果 nginx 官网已经发布了 1.30 版本，但是使用 `dnf install` 安装的版本只有 1.20，并且软件仓库中没有提供更新的版本，那么 `dnf` 将不会提示有新的版本可以更新。这是因为 `dnf` 只能从配置的软件仓库中获取可用的软件包和版本。

如果不指定具体的软件包，那么 `dnf upgrade` 命令会升级所有已安装的软件包到最新版本，例如升级所有安全相关的软件包：

```bash
dnf upgrade --security
```

```console
Last metadata expiration check: 0:13:34 ago on Sun 18 Jan 2026 09:35:32 PM CST.
Dependencies resolved.
=================================================================
 Package              Arch   Version                Repo    Size
=================================================================
Installing:
 kernel               x86_64 6.12.0-124.27.1.el10_1 baseos 1.4 M
Upgrading:
 binutils             x86_64 2.41-58.el10_1.2       baseos 6.4 M
 binutils-gold        x86_64 2.41-58.el10_1.2       baseos 797 k
 crypto-policies      noarch 20250905-2.gitc7eb7b2.el10
                                                    baseos  95 k
 crypto-policies-scripts
                      noarch 20250905-2.gitc7eb7b2.el10
                                                    baseos 134 k
 expat                x86_64 2.7.1-1.el10_0.3       baseos 119 k
 glib2                x86_64 2.80.4-10.el10         baseos 3.0 M
 glibc                x86_64 2.39-58.el10_1.2       baseos 2.1 M
 glibc-all-langpacks  x86_64 2.39-58.el10_1.2       baseos  18 M
 glibc-common         x86_64 2.39-58.el10_1.2       baseos 338 k
 glibc-gconv-extra    x86_64 2.39-58.el10_1.2       baseos 1.6 M
 gnutls               x86_64 3.8.10-2.el10          baseos 1.5 M
 grub2-common         noarch 1:2.12-29.el10_1       baseos 1.0 M
 grub2-pc             x86_64 1:2.12-29.el10_1       baseos  15 k
 grub2-pc-modules     noarch 1:2.12-29.el10_1       baseos 1.1 M
 grub2-tools          x86_64 1:2.12-29.el10_1       baseos 1.8 M
 grub2-tools-minimal  x86_64 1:2.12-29.el10_1       baseos 612 k
 iputils              x86_64 20240905-4.el10        baseos 196 k
 jq                   x86_64 1.7.1-11.el10          baseos 201 k
 kernel-tools         x86_64 6.12.0-124.27.1.el10_1 baseos 1.9 M
 kernel-tools-libs    x86_64 6.12.0-124.27.1.el10_1 baseos 1.4 M
 krb5-libs            x86_64 1.21.3-8.el10_0        baseos 762 k
 libarchive           x86_64 3.7.7-4.el10_0         baseos 414 k
 libssh               x86_64 0.11.1-5.el10_1        baseos 234 k
 libssh-config        noarch 0.11.1-5.el10_1        baseos 8.7 k
 libsss_certmap       x86_64 2.11.1-2.el10_1.1      baseos  81 k
 libsss_idmap         x86_64 2.11.1-2.el10_1.1      baseos  41 k
 libsss_nss_idmap     x86_64 2.11.1-2.el10_1.1      baseos  44 k
 libsss_sudo          x86_64 2.11.1-2.el10_1.1      baseos  33 k
 libxml2              x86_64 2.12.5-9.el10_0        baseos 691 k
 openssl-libs         x86_64 1:3.5.1-5.el10_1       baseos 2.2 M
 pam                  x86_64 1.6.1-8.el10           baseos 563 k
 pam-libs             x86_64 1.6.1-8.el10           baseos  57 k
 python3              x86_64 3.12.12-2.el10_1       baseos  28 k
 python3-libs         x86_64 3.12.12-2.el10_1       baseos 9.4 M
 shadow-utils         x86_64 2:4.15.0-8.el10        baseos 1.3 M
 sqlite-libs          x86_64 3.46.1-5.el10_1        baseos 745 k
 sssd-client          x86_64 2.11.1-2.el10_1.1      baseos 152 k
 sssd-common          x86_64 2.11.1-2.el10_1.1      baseos 1.5 M
 sssd-kcm             x86_64 2.11.1-2.el10_1.1      baseos 103 k
 sssd-krb5-common     x86_64 2.11.1-2.el10_1.1      baseos  93 k
 sudo                 x86_64 1.9.15-9.p5.el10       baseos 1.3 M
 vim-data             noarch 2:9.1.083-6.el10       baseos  17 k
 vim-minimal          x86_64 2:9.1.083-6.el10       baseos 799 k
Installing dependencies:
 kernel-core          x86_64 6.12.0-124.27.1.el10_1 baseos  18 M
 kernel-modules       x86_64 6.12.0-124.27.1.el10_1 baseos  41 M
 kernel-modules-core  x86_64 6.12.0-124.27.1.el10_1 baseos  30 M
 kernel-modules-extra x86_64 6.12.0-124.27.1.el10_1 baseos 2.8 M
 openssl-fips-provider
                      x86_64 1:3.5.1-5.el10_1       baseos 811 k

Transaction Summary
=================================================================
Install   6 Packages
Upgrade  43 Packages

Total download size: 157 M
```

如果指定了具体的软件包，`dnf` 会只升级那些指定的软件包：

```bash
dnf upgrade nginx
```

```console
Last metadata expiration check: 0:07:42 ago on Sun 18 Jan 2026 09:35:32 PM CST.
Package nginx available, but not installed.
No match for argument: nginx
Error: No packages marked for upgrade.
```

提示系统中已安装的 nginx 版本，已经是当前启用仓库中的最新版本，没有可升级的更高版本。

### 软件卸载

软件卸载是指使用 `dnf` 命令行工具从 Linux 系统中移除不再需要的软件包。当卸载一个软件包时，`dnf` 会删除该软件包及其所有配置文件，但不会删除该软件包的依赖项，除非这些依赖项不再被其他已安装的软件包所需要。

```bash
dnf remove nginx
```

```console
Dependencies resolved.
=================================================================
 Package            Arch    Version            Repository   Size
=================================================================
Removing:
 nginx              x86_64  2:1.26.3-1.el10    @appstream  120 k
Removing unused dependencies:
 nginx-core         x86_64  2:1.26.3-1.el10    @appstream  1.8 M
 nginx-filesystem   noarch  2:1.26.3-1.el10    @appstream  141  
 rocky-logos-httpd  noarch  100.4-7.el10       @appstream   24 k

Transaction Summary
=================================================================
Remove  4 Packages

Freed space: 1.9 M
Is this ok [y/N]: 
```

## EPEL

EPEL（Extra Packages for Enterprise Linux）是一个由 Fedora 特别兴趣小组（Special Interest Group）维护的项目，它为 Red Hat Enterprise Linux（RHEL）及其衍生版，如 CentOS、Rocky Linux、Scientific Linux 等，提供额外的软件包。这些软件包不是由 Red Hat 官方提供的，但它们被认为对企业用户是有价值的补充。

EPEL 仓库是独立于操作系统官方仓库的。它和官方仓库相互补充，官方仓库侧重于提供操作系统运行所必需的基础软件包，并且这些软件包经过了严格的兼容性和稳定性测试，通常更新速度相对较慢。而 EPEL 仓库则提供更多种类的软件，更新速度可能会更快，尤其是对于一些新兴的或者特定领域的软件。

例如，如果在系统上需要安装一些比较新的开发库，像 Python 的某些高级库或者一些网络测试工具，而这些工具在官方仓库中不存在，就可以从 EPEL 仓库中寻找并安装。

EPEL 仓库的主要特点包括：

- **高质量软件包**：EPEL 仓库中的软件包经过了严格的测试和审查，以确保它们在企业级 Linux 发行版上能够稳定运行
- **非冲突性**：EPEL 软件包被设计为不会与发行版默认提供的软件包发生冲突，它们可以作为补充，提供更多的选择
- **开源**：EPEL 项目本身是开源的，任何人都可以贡献软件包或者改进现有的软件包
- **安全和合规**：EPEL 软件包遵循 Red Hat 的安全和合规标准，适合在企业环境中使用
- **广泛的软件支持**：EPEL 提供了许多在默认仓库中不可用的软件包，包括一些流行的开源项目和工具
- **社区支持**：EPEL 是由社区驱动的，这意味着它依赖于社区的贡献和维护

要使用 EPEL 仓库，需要先在系统中启用它。这通常涉及到下载并安装 EPEL 仓库的配置文件（通常是 `.repo` 文件），然后使用 `dnf` 更新仓库缓存。一旦启用，就可以使用 `dnf` 命令来安装 EPEL 仓库中的软件包了。

可以使用 `dnf` 命令直接安装 EPEL 仓库的配置包：

```bash

```

安装完成后，可以使用以下命令来检查 EPEL 仓库是否已经正确启用：

```bash
dnf repolist
```

```console {5}
repo id       repo name
appstream     Rocky Linux 10 - AppStream
baseos        Rocky Linux 10 - BaseOS
crb           Rocky Linux 10 - CRB
epel          Extra Packages for Enterprise Linux 10 - x86_64
extras        Rocky Linux 10 - Extras
```

也可以通过查看 `/etc/yum.repos.d/` 目录下的 `.repo` 文件来检查 EPEL 仓库的配置：

```bash
ll /etc/yum.repos.d/epel*
```

```console
-rw-r--r--. 1 root root 1612 Nov 19 08:00 /etc/yum.repos.d/epel.repo
-rw-r--r--. 1 root root 1714 Nov 19 08:00 /etc/yum.repos.d/epel-testing.repo
```

- `epel-testing.repo`：包含了尚未被标记为稳定的软件包。通常这些软件包是新加入 EPEL 的，或者版本较新，可能还没有经过广泛的测试和验证

EPEL 默认的软件包仓库地址是国外的，对于国内用户来说，从国外地址下载软件包可能会遇到网络速度慢、下载中断甚至无法访问的情况，也需要更换为国内镜像源，以阿里云为例，可以执行以下命令：

```shell
sed -ednf -y install epel-release 's!^metalink=!#metalink=!g' \
-e 's!^#baseurl=!baseurl=!g' \
-e 's!https\?://download\.example/pub/epel!https://mirrors.aliyun.com/epel!g' \
-i /etc/yum.repos.d/epel{,-testing}.repo
```

修改配置后，需要清除 `dnf` 的缓存并重建，以确保系统使用新的镜像源：

```bash
dnf clean all
dnf makecache
```

## DNF 模块

> [!WARNING]
> Rocky Linux 10 已弃用 DNF 模块化，系统默认不再提供模块元数据与模块流，相关命令（如 dnf module list/enable/switch-to）将失效或仅作兼容提示，后续 DNF5 会彻底移除模块化功能。未来多版本软件将主要通过传统 RPM 仓库、软件集合（SCL）、Flatpak 等方式提供。

```bash
dnf module list
```

```console
WARNING: modularity is deprecated, and functionality will be removed in a future release of DNF5.
Last metadata expiration check: 18:50:46 ago on Tue 25 Nov 2025 02:27:40 PM CST.
```

- 表明模块化已被标记为废弃，后续会在 DNF5 中彻底移除
